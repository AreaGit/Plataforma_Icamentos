<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Criar Novo Chamado - Içamentos</title>

  <!-- Fontes / Ícones -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Flatpickr -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>

  <!-- Fonte -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">

  <!-- CSS da página -->
  <link rel="stylesheet" href="../css/novo-chamado.css" />
</head>
<body>
  <header>
    <div class="header-left">
      <h1>Novo Chamado - Içamentos</h1>
      <span class="header-subtitle">Portal exclusivo de içamento Samsung</span>
    </div>

    <button id="logout-btn" type="button">
      <i class="fa-solid fa-arrow-left"></i>
      Voltar ao Dashboard
    </button>
  </header>

  <main class="novo-chamado-container">
    <h2>Criar Novo Chamado de Içamento</h2>
    <p class="page-description">
      Preencha os dados abaixo para solicitar um novo serviço de içamento.  
      Os campos marcados com <span class="asterisco">*</span> são obrigatórios.
    </p>

    <form class="chamado-form" id="form-chamado">

      <!-- =========================
            BLOCO 1 - OS / DESCRIÇÃO
      ========================== -->
      <section class="form-section">
        <h3><i class="fa-solid fa-file-lines"></i> Dados da Ordem de Serviço</h3>

        <div class="form-grid">
          <div class="form-group">
            <label for="ordem">Ordem de Serviço <span class="asterisco">*</span></label>
            <input type="text" id="ordem" placeholder="Ex: 123456" required minlength="1" maxlength="10">
          </div>

          <div class="form-group form-group-full">
            <label for="descricao">Descrição <span class="asterisco">*</span></label>
            <textarea id="descricao" placeholder="Descreva os detalhes do içamento" required></textarea>
          </div>
        </div>
      </section>

      <!-- =========================
            BLOCO 2 - ENDEREÇO
      ========================== -->
      <section class="form-section">
        <h3><i class="fa-solid fa-location-dot"></i> Endereço do Içamento</h3>

        <div class="form-grid">
          <div class="form-group">
            <label for="cep">CEP <span class="asterisco">*</span></label>
            <input type="text" id="cep" placeholder="00000-000" required>
          </div>

          <div class="form-group">
            <label for="estado">Estado <span class="asterisco">*</span></label>
            <input type="text" name="estado" id="estado" placeholder="Ex: SP" required>
          </div>

          <div class="form-group">
            <label for="cidade">Cidade <span class="asterisco">*</span></label>
            <input type="text" name="cidade" id="cidade" placeholder="Informe a cidade" required>
          </div>

          <div class="form-group">
            <label for="bairro">Bairro <span class="asterisco">*</span></label>
            <input type="text" name="bairro" id="bairro" placeholder="Informe o bairro" required>
          </div>

          <div class="form-group form-group-lg">
            <label for="rua">Rua <span class="asterisco">*</span></label>
            <input type="text" name="rua" id="rua" placeholder="Nome da rua/avenida" required>
          </div>

          <div class="form-group">
            <label for="numero">Número do Local <span class="asterisco">*</span></label>
            <input type="text" name="numero" id="numero" placeholder="Ex: 123" required>
          </div>

          <div class="form-group">
            <label for="local">Local</label>
            <select name="local" id="local">
              <option value="">Selecionar...</option>
              <option value="CAPITAL">CAPITAL</option>
              <option value="INTERIOR">INTERIOR</option>
            </select>
          </div>

          <div class="form-group">
            <label for="regiao">Região</label>
            <select name="regiao" id="regiao">
              <option value="">Selecionar...</option>
              <option value="NORTE">NORTE</option>
              <option value="NORDESTE">NORDESTE</option>
              <option value="CENTRO-OESTE">CENTRO-OESTE</option>
              <option value="SUDESTE">SUDESTE</option>
              <option value="SUL">SUL</option>
            </select>
          </div>
        </div>
      </section>

      <!-- =========================
            BLOCO 3 - SERVIÇO
      ========================== -->
      <section class="form-section">
        <h3><i class="fa-solid fa-truck-ramp-box"></i> Dados do Serviço</h3>

        <div class="form-grid">
          <div class="form-group">
            <label for="tipo_icamento">Tipo de Içamento <span class="asterisco">*</span></label>
            <select name="tipo_icamento" id="tipo_icamento" required>
              <option value="">Selecionar...</option>
              <option value="SUBIDA">SUBIDA</option>
              <option value="DESCIDA">DESCIDA</option>
              <option value="SUBIDA/DESCIDA">SUBIDA/DESCIDA</option>
            </select>
          </div>

          <div class="form-group">
            <label for="produto">Produto <span class="asterisco">*</span></label>
            <select name="produto" id="produto" required>
              <option value="">Selecionar...</option>
              <option value="TELEVISOR">TELEVISOR</option>
              <option value="GELADEIRA">GELADEIRA</option>
            </select>
          </div>

          <div class="form-group">
            <label for="vt">Será necessário VT? <span class="asterisco">*</span></label>
            <select name="vt" id="vt" required>
              <option value="">Selecionar...</option>
              <option value="SIM">SIM</option>
              <option value="NÃO">NÃO</option>
            </select>
          </div>

          <div class="form-group">
            <label for="art">Local exige ART? <span class="asterisco">*</span></label>
            <select name="art" id="art" required>
              <option value="">Selecionar...</option>
              <option value="SIM">SIM</option>
              <option value="NÃO">NÃO</option>
            </select>
          </div>
        </div>

        <!-- Campos extras de ART -->
        <div id="art-info" class="art-extra" style="display: none;">
          <div class="form-grid">
            <div class="form-group">
              <label for="art_nome">Responsável pela ART</label>
              <input type="text" id="art_nome" placeholder="Nome do responsável pela ART">
            </div>

            <div class="form-group">
              <label for="art_cpf">CPF do Responsável</label>
              <input type="text" id="art_cpf" placeholder="000.000.000-00" maxlength="14">
            </div>
          </div>
        </div>
      </section>

      <!-- =========================
            BLOCO 4 - AGENDAMENTO
      ========================== -->
      <section class="form-section">
        <h3><i class="fa-solid fa-calendar-check"></i> Agendamento</h3>

        <div class="form-grid">
          <div class="form-group">
            <label for="data_agendada">
              Data Agendada <span class="asterisco">*</span>
              <small>(mínimo 48 horas)</small>
            </label>
            <!-- IMPORTANTE: texto + flatpickr (não type="date") -->
            <input
              type="text"
              name="data_agendada"
              id="data_agendada"
              placeholder="Selecione a data"
              autocomplete="off"
              required
            >
          </div>

          <div class="form-group">
            <label for="horario">Horário (manhã/tarde) <span class="asterisco">*</span></label>
            <select name="horario" id="horario" required>
              <option value="">Selecionar...</option>
              <option value="09:00">09:00</option>
              <option value="11:00">11:00</option>
              <option value="13:00">13:00</option>
              <option value="15:00">15:00</option>
            </select>
          </div>
        </div>
      </section>

      <!-- =========================
            BLOCO 5 - ANEXOS / INFO
      ========================== -->
      <section class="form-section">
        <h3><i class="fa-solid fa-paperclip"></i> Anexos & Informações Úteis</h3>

        <div class="form-grid">
          <div class="form-group">
            <label for="anexos">Anexar Arquivos</label>
            <input type="file" id="anexos" multiple>
            <small>Envie fotos do local, planta, fachada etc. (opcional)</small>
          </div>

          <div class="form-group form-group-full">
            <label for="informacoes_uteis">Informações Úteis</label>
            <textarea
              name="informacoes_uteis"
              id="informacoes_uteis"
              placeholder="Descreva detalhes importantes, restrições de acesso, horários do condomínio etc.">
            </textarea>
          </div>
        </div>
      </section>

      <!-- =========================
            BLOCO 6 - VALORES
      ========================== -->
      <section class="valor-icamento-section">
        <div class="valor-info">
          <h3>Valor Total do Içamento</h3>
          <p class="valor-legenda">
            O valor mostrado abaixo é calculado com base no produto, região, tipo de içamento, ART e VT.
          </p>
        </div>

        <div class="valor-display-wrapper">
          <div id="valor-icamento" class="valor-display">
            R$ 0,00
          </div>
          <button id="btnCalcular" type="button" class="btn-calcular">
            <i class="fa-solid fa-calculator"></i> Calcular Valor
          </button>
        </div>
      </section>

      <!-- BOTÃO FINAL -->
      <div class="form-actions">
        <button type="submit" id="btnSubmit" disabled>
          <i class="fa-solid fa-paper-plane"></i>
          Criar Chamado
        </button>
        <small class="hint-submit">
          O botão será habilitado após o cálculo do valor do içamento.
        </small>
      </div>
    </form>
  </main>

  <!-- LOADING OVERLAY -->
  <div class="loading-screen">
    <div class="spinner"></div>
  </div>

  <!-- ALERTAS -->
  <div id="aviso-erro" class="alerta alerta-aviso" style="display: none;">
    <span class="icone">&#9888;</span>
    <span class="mensagem">Erro ao agendar Chamado!</span>
    <span class="fechar" onclick="fecharAvisoErro()">&#10005;</span>
  </div>

  <div id="aviso-sucesso" class="alerta alerta-aviso-sucesso" style="display: none;">
    <span class="icone"><i class="fas fa-check-circle"></i></span>
    <span class="mensagem">Chamado agendado com Sucesso!</span>
    <span class="fechar" onclick="fecharAvisoSucesso()">&#10005;</span>
  </div>

  <!-- JS da página -->
  <script src="../js/novo-chamado.js"></script>
</body>
</html>