<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Criar Novo Chamado - Içamentos</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/novo-chamado.css" />
</head>
<body>
  <header>
    <h1>Novo Chamado - Içamentos</h1>
    <button id="logout-btn">Voltar</button>
  </header>

  <main class="novo-chamado-container">
    <h2>Criar Novo Chamado de Içamento</h2>

    <form class="chamado-form" id="form-chamado">
      <label for="ordem">Ordem de Serviço *</label>
      <input type="text" id="ordem" placeholder="Informe a ordem de serviço" required minlength="1" maxlength="10">
      
      <label for="descricao">Descrição</label>
      <textarea id="descricao" placeholder="Descreva os detalhes do içamento" required></textarea>

      <label for="cep">CEP</label>
      <input type="text" id="cep" placeholder="Informe o CEP" required>

      <label for="estado">Estado</label>
      <input type="text" name="estado" id="estado" placeholder="Informe o Estado" required>

      <label for="cidade">Cidade</label>
      <input type="text" name="cidade" id="cidade" placeholder="Informe a Cidade" required>

      <label for="bairro">Bairro</label>
      <input type="text" name="bairro" id="bairro" placeholder="Informe o Bairro" required>

      <label for="rua">Rua</label>
      <input type="text" name="rua" id="rua" placeholder="Informe a Rua" required>

      <label for="numero">Número do Local</label>
      <input type="text" name="numero" id="numero" placeholder="Informe o numero do local" required>

      <label for="local">Local</label>
      <select name="local" id="local">
        <option>Selecionar</option>
        <option value="CAPITAL">CAPITAL</option>
        <option value="INTERIOR">INTERIOR</option>
      </select>

      <label for="regiao">Região</label>
      <select name="regiao" id="regiao">
        <option>Selecionar</option>
        <option value="NORTE">NORTE</option>
        <option value="NORDESTE">NORDESTE</option>
        <option value="CENTRO-OESTE">CENTRO-OESTE</option>
        <option value="SUDESTE">SUDESTE</option>
        <option value="SUL">SUL</option>
      </select>

      <label for="tipo_icamento">Tipo de Içamento</label>
      <select name="tipo_icamento" id="tipo_icamento">
        <option>Selecionar</option>
        <option value="SUBIDA">SUBIDA</option>
        <option value="DESCIDA">DESCIDA</option>
        <option value="SUBIDA/DESCIDA">SUBIDA/DESCIDA</option>
      </select>

      <label for="produto">Produto</label>
      <select name="produto" id="produto">
        <option>Selecionar</option>
        <option value="TELEVISOR">TELEVISOR</option>
        <option value="GELADEIRA">GELADEIRA</option>
      </select>

      <label for="vt">Será necessário VT ?</label>
      <select name="vt" id="vt">
        <option>Selecionar</option>
        <option value="SIM">SIM</option>
        <option value="NÃO">NÃO</option>
      </select>
      
      <label for="art">Local exige ART</label>
      <select name="art" id="art">
        <option>Selecionar</option>
        <option value="SIM">SIM</option>
        <option value="NÃO">NÃO</option>
      </select>      

      <!-- Campos adicionais que só aparecem quando SIM -->
      <div id="art-info" style="display: none; margin-top: 10px; padding: 10px;">
        <label for="art_nome">Nome do Responsável pela ART</label>
        <br>
        <input type="text" id="art_nome" placeholder="Informe o nome do responsável">
        <br>
        <label for="art_cpf">CPF do Responsável pela ART</label>
        <br>
        <input type="text" id="art_cpf" placeholder="Informe o CPF" maxlength="14">
      </div>
        
      <label for="data_agendada">Data Agendada (mínimo 48 horas)</label>
      <input type="date" name="data_agendada" id="data_agendada" required>

      <label for="horario">Horário (manhã e tarde)</label>
      <select name="horario" id="horario">
        <option value="">Selecionar</option>
        <option value="09:00">09:00</option>
        <option value="11:00">11:00</option>
        <option value="13:00">13:00</option>
        <option value="15:00">15:00</option>
      </select>

      <label for="anexos">Anexar Arquivos</label>
      <input type="file" id="anexos" multiple>

      <label for="informacoes_uteis">Informações Úteis</label>
      <textarea name="informacoes_uteis" id="informacoes_uteis" placeholder="Descreva as informações úteis do içamento"></textarea>

      <section class="valor-icamento-section">
        <h3>Valor Total do Içamento</h3>
        <button id="btnCalcular" type="button">Calcular Valor</button>
        <div id="valor-icamento">R$ 0,00</div>
      </section>

      <button type="submit">Criar Chamado</button>
    </form>
  </main>
  <div class="loading-screen">
    <div class="spinner"></div>
  </div>
  <div id="aviso-erro" class="alerta alerta-aviso" style="display: none;">
    <span class="icone">&#9888;</span>
    <span class="mensagem">Erro ao agendar Chamado!</span>
    <span class="fechar" onclick="fecharAvisoErro()">&#10005;</span>
  </div>
    <div id="aviso-sucesso" class="alerta alerta-aviso-sucesso">
    <span class="icone"><i class="fas fa-check-circle"></i></span>
    <span class="mensagem">Chamado agendado com Sucesso!</span>
    <span class="fechar" onclick="fecharAvisoSucesso()">&#10005;</span>
  </div>
  <script src="../js/novo-chamado.js"></script>
</body>
</html>